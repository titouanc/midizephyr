#include <math.h>
#include <stdlib.h>
#include <zephyr/kernel.h>


const float cos256f32[256] = {
    1.0,
    0.9998482259889359,
    0.999392996097145,
    0.9986345866928941,
    0.9975734582035323,
    0.9962102548359679,
    0.994545804185573,
    0.9925811167337533,
    0.9903173852344889,
    0.9877559839902184,
    0.9848984680175048,
    0.9817465721029915,
    0.9783022097502204,
    0.9745674720179507,
    0.9705446262506858,
    0.9662361147021779,
    0.9616445530527447,
    0.9567727288213004,
    0.9516235996730644,
    0.9462002916239739,
    0.9405060971428922,
    0.9345444731527641,
    0.9283190389319314,
    0.9218335739168833,
    0.9150920154077753,
    0.9080984561781109,
    0.9008571419900333,
    0.8933724690167416,
    0.8856489811735904,
    0.8776913673594968,
    0.8695044586103295,
    0.8610932251660046,
    0.8524627734530736,
    0.8436183429846313,
    0.8345653031794291,
    0.825309150102121,
    0.8158555031266255,
    0.806210101524625,
    0.7963788009812774,
    0.7863675700402526,
    0.7761824864802529,
    0.765829733625218,
    0.7553155965904534,
    0.7446464584669619,
    0.7338287964462934,
    0.7228691778882692,
    0.7117742563339622,
    0.7005507674663594,
    0.6892055250211552,
    0.6777454166501591,
    0.6661773997398298,
    0.6545084971874737,
    0.6427457931376711,
    0.6308964286815202,
    0.6189675975213094,
    0.6069665416032488,
    0.5949005467209129,
    0.582776938092065,
    0.5706030759115457,
    0.5583863508829282,
    0.546134179731651,
    0.5338540007023538,
    0.5215532690431479,
    0.5092394524795649,
    0.4969200266809307,
    0.4846024707219149,
    0.472294262542015,
    0.46000287440572923,
    0.44773576836617335,
    0.43550039173489835,
    0.42330417256065733,
    0.4111545151198658,
    0.39905879542149497,
    0.3870243567291262,
    0.37505850510288463,
    0.3631685049639587,
    0.35136157468439866,
    0.3396448822048725,
    0.328025540683036,
    0.31651060417516397,
    0.30510706335366033,
    0.29382184126304833,
    0.28266178911701756,
    0.27163368213907974,
    0.2607442154493568,
    0.2500000000000001,
    0.2394075585617076,
    0.22897332176377527,
    0.21870362419008843,
    0.20860470053341956,
    0.19868268181037185,
    0.1889435916392631,
    0.17939334258321094,
    0.17003773256063864,
    0.16088244132538299,
    0.15193302701853673,
    0.14319492279412388,
    0.13467343352065347,
    0.12637373256055462,
    0.11830085862944861,
    0.11045971273716476,
    0.102855055212357,
    0.09549150281252633,
    0.08837352592120645,
    0.08150544583401115,
    0.074891432135193,
    0.06853550016630516,
    0.06244150858850367,
    0.05661315703996905,
    0.05105398388987098,
    0.04576736409023818,
    0.040756507127038544,
    0.03602445507171265,
    0.0315740807343447,
    0.027408085919590264,
    0.023528999786421756,
    0.019939177312685963,
    0.016640797865406287,
    0.013635863877697663,
    0.010926199633097156,
    0.008513450158049107,
    0.006399080223215503,
    0.004584373454219859,
    0.0030704315523631953,
    0.0018581736257852755,
    0.0009483356314779479,
    0.00034146992848854696,
    3.7944942584688945e-05,
    3.7944942584688945e-05,
    0.00034146992848854696,
    0.0009483356314779479,
    0.00185817362578522,
    0.0030704315523631953,
    0.004584373454219859,
    0.006399080223215503,
    0.008513450158049107,
    0.010926199633097156,
    0.013635863877697607,
    0.016640797865406287,
    0.019939177312685907,
    0.0235289997864217,
    0.027408085919590208,
    0.031574080734344645,
    0.03602445507171259,
    0.04075650712703843,
    0.04576736409023813,
    0.051053983889870924,
    0.056613157039969,
    0.062441508588503614,
    0.06853550016630511,
    0.07489143213519284,
    0.08150544583401109,
    0.08837352592120634,
    0.09549150281252622,
    0.10285505521235688,
    0.1104597127371647,
    0.11830085862944839,
    0.1263737325605545,
    0.13467343352065342,
    0.14319492279412382,
    0.15193302701853661,
    0.16088244132538293,
    0.1700377325606386,
    0.17939334258321082,
    0.18894359163926305,
    0.19868268181037174,
    0.20860470053341945,
    0.21870362419008837,
    0.22897332176377522,
    0.2394075585617073,
    0.24999999999999978,
    0.2607442154493565,
    0.27163368213907946,
    0.2826617891170176,
    0.29382184126304833,
    0.30510706335366033,
    0.31651060417516397,
    0.3280255406830359,
    0.3396448822048723,
    0.35136157468439855,
    0.36316850496395847,
    0.3750585051028844,
    0.38702435672912594,
    0.39905879542149464,
    0.41115451511986545,
    0.423304172560657,
    0.43550039173489846,
    0.44773576836617335,
    0.4600028744057292,
    0.472294262542015,
    0.48460247072191476,
    0.4969200266809306,
    0.5092394524795648,
    0.5215532690431476,
    0.5338540007023536,
    0.5461341797316508,
    0.5583863508829279,
    0.5706030759115455,
    0.5827769380920647,
    0.594900546720913,
    0.6069665416032488,
    0.6189675975213094,
    0.6308964286815202,
    0.642745793137671,
    0.6545084971874736,
    0.6661773997398297,
    0.6777454166501589,
    0.689205525021155,
    0.7005507674663591,
    0.7117742563339619,
    0.7228691778882689,
    0.7338287964462931,
    0.7446464584669619,
    0.7553155965904534,
    0.765829733625218,
    0.7761824864802529,
    0.7863675700402526,
    0.7963788009812773,
    0.8062101015246248,
    0.8158555031266254,
    0.8253091501021209,
    0.8345653031794289,
    0.8436183429846311,
    0.8524627734530734,
    0.8610932251660047,
    0.8695044586103295,
    0.8776913673594968,
    0.8856489811735904,
    0.8933724690167416,
    0.9008571419900333,
    0.9080984561781107,
    0.9150920154077753,
    0.921833573916883,
    0.9283190389319312,
    0.934544473152764,
    0.9405060971428921,
    0.9462002916239738,
    0.9516235996730644,
    0.9567727288213005,
    0.9616445530527447,
    0.9662361147021779,
    0.9705446262506858,
    0.9745674720179506,
    0.9783022097502203,
    0.9817465721029914,
    0.9848984680175047,
    0.9877559839902182,
    0.9903173852344889,
    0.9925811167337533,
    0.9945458041855729,
    0.9962102548359679,
    0.9975734582035323,
    0.9986345866928941,
    0.999392996097145,
    0.9998482259889359,
    1.0
};

float approxcos_normalized(float t)
{
	size_t idx = ARRAY_SIZE(cos256f32) * t;
	return cos256f32[idx % ARRAY_SIZE(cos256f32)];
}


float approxcos(float rad)
{
	return approxcos_normalized(rad / (2 * M_PI));
}
